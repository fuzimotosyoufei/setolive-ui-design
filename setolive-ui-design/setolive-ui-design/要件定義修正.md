# 1.要件定義

# 1.用語
-   カード	受注1件を示すパネル。顧客名・商品名などを表示。
- ドラッグ＆ドロップ	カードをマウスでつかんで移動し、ステータスを変更する操作。
- ステータス	受注の処理段階。「新規予約」「受注確定」「発送済み」など。
- タブ	画面切り替え用の見出し。各機能（受注一覧・売上分析など）へ移動できる。
- CSV出力	受注データをCSV形式で保存する機能。





# 3.システム構築後のフロー
1.   このシステムの利用者が事前に登録されたパスワードとIDで受注管理アプリ[セトリーブ]にログイン
2.  ログイン後,ECサイトからCSVファイルを[セトリーブ]に自動で取り込み。
3.  [セトリーブ]の業務メイン画面で受注一覧機能を使い[新規予約]の確認をする
4.  在庫が確保でき、発送可能と判断した場合、[セトリーブ]の受注一覧表示機能で[新規予約]を、[受注確定(引き当て済み)]に変える。
5.  その後、商品をピッキング、梱包し、発送が完了したら、[セトリーブ]の受注一覧表示機能で[受注確定(引き当て済み)]を、[発送済み]に変える。

        
  # 4.権限
-   一般：受注一覧表示、商品確認、商品発注、売り上げ・顧客分析機能を利用可能  
-   責任者：一般機能に加え、商品マスタの観覧変更、商品登録・変更機能を使用可能
 
# 5.機能要件
- 画面構成
<img src="images\スクリーンショット 2025-07-29 150639.png" width="70%">

1. ログイン画面
    - ユーザーはIDとパスワードを入力してログインする。
    - 入力された情報に誤りがある場合、適切なエラーメッセージを表示する。//
    - 入力項目が未記入の場合、エラーメッセージを表示しログイン処理を行わない。
    - 権限（一般／責任者）に応じた画面に遷移する。
    - ログイン失敗時には、どちらが誤っているか分からないような汎用的なエラーメッセージを表示する。

2. セトリーブ
<img src="images\スクリーンショット 2025-07-30 173732.png" width="70%">
    本システム「セトリーブ」は、大きく分けて以下の2つの画面を持ちます。

3.**業務メイン画面**  
    受注ステータスの確認・変更、商品の確認・発注、商品マスタの登録・編集などを行う画面。

4.**顧客・売上分析画面**  
  顧客の詳細情報や売上データの分析を行う画面。

画面の切り替えは、セトリーブ内の専用ボタンでいつでも可能です。
1. 業務メイン画面

    - ログイン後に表示されるメイン画面
    - 登録済みの受注情報を自動でCSV形式で取得し、30秒ごとに更新される。自動取得が間に合わない場合は、手動でCSV取得も可能。
    - 画面は大きく次の2つに分かれる：
    4.受注一覧画面（左画面）
    - 受注情報をカードUIで表示。カンバン方式により直感的な処理が可能。

    5.商品詳細画面（右画面）
    - 商品情報の確認・発注・商品マスタ登録・変更が可能。※登録・変更は責任者のみ。
- 商品名・IDによる検索、顧客ID・商品名でのソートに対応。
- キーボードショートカットによる操作支援機能を実装。
  - 各ショートカットは画面上に明示され、直感的な操作が可能

   

1. 受注一覧画面（左画面）

- カンバン方式のカードUIにより、受注ステータスの確認・更新が直感的に行える。
- 3つのステータス（新規予約・受注確定・発送済み）ごとにカードが分かれて表示され、ドラッグ＆ドロップやキーボードでステータス変更可能。
<img src="images\スクリーンショット 2025-07-10 165307.png" width="20%">
<img src="images\スクリーンショット 2025-07-10 165312.png" width="20%">
<img src="images\スクリーンショット 2025-07-10 165315.png" width="20%">
<img src="images\スクリーンショット 2025-07-10 165319.png" width="20%">



- 一括選択・移動、取り消し（キャンセル）・確定操作にも対応し、効率的な受注処理を支援。

- 各カードには顧客・商品情報、メッセージ送信欄、AIによるメッセージ提案機能を備える。

- 在庫状態によるフィルタ、カード枚数表示、並び替え（ソート）など補助機能も実装。

- カードUIに触れることで詳細情報が画面右上に表示される 
<img src="images/スクリーンショット 2025-10-26 125410.png" width="60%">

    受注カードは、処理状況に応じて色分けされ、ゾーン（新規予約／受注確定／発送済み）に自動で分類されます。
「新規予約」から「受注確定」への移動時には、在庫データベースと連携して在庫を自動で減算。在庫が足りない場合は🟥赤色となり、確定操作ができません。

| 色   | ステータス | ゾーン名 | 説明                                                       | 操作                   |
| ---- | ---------- | -------- | ---------------------------------------------------------- | ---------------------- |
| 🟩 緑 | 未処理     | 新規予約 | ECサイトから取り込まれた新規受注。在庫チェック前の状態。   | ✅ 移動可（受注確定へ） |
| 🟨 黄 | 引き当て済 | 受注確定 | 在庫が自動で確保された受注。発送処理へ進行可能。           | ✅ 移動可（発送済みへ） |
| 🟦 青 | 完了       | 発送済み | 発送済み。履歴として閲覧のみ可能。                         | ✅ 閲覧のみ             |
| 🟥 赤 | 在庫不足   | -        | 在庫が不足しているため、受注確定などの処理ができない状態。 | ❌ 操作不可             |

- 受注カードのステータスが変更されたタイミングで、ゾーンに応じた定型メッセージが自動送信されます。
- 誤操作対策として、発送済み（🟦）から受注確定（🟨）へ戻した場合は、「送信ミスのお知らせ」も自動送信されます。
   | ゾーン変更           | 自動メッセージ内容                 |
   | -------------------- | ---------------------------------- |
   | 🟩 → 🟨 受注確定       | 「在庫が確保されました」           |
   | 🟨 → 🟦 発送済み       | 「商品を発送しました」             |
   | 🟦 → 🟨 受注確定に戻す | 「先ほどの発送通知は誤送信でした」 |

1. 商品詳細画面（右画面）
<!-- 簡単な説明が欲しい -->
- 表示内容は以下の3種類で構成され、上部の切り替えボタンまたはショートカットキーにより動的に画面を変更できる。

a. 商品確認・発注（一般）
b. 商品マスタ確認・商品登録（責任）

<!-- - ソート機能 -->


a. 商品確認・発注（一般）
- a. 商品確認・発注（一般ユーザー向け）
- 商品一覧を確認し、日付単位で発注操作を行う。
- 在庫状況（現在在庫・受注数による差引在庫）を確認しながら、発注数量を調整できる。

- 発注数量の調整後、「発注確定」ボタンで確認ダイアログを経て発注処理を実行。

- 表示対象は「在庫あり／なし」チェックでフィルタリング可能。

- 各商品には以下の情報を表示：
<img src="images\スクリーンショット 2025-07-30 145911.png" width="50%">
- 商品ID、商品名、売価、在庫数、差引在庫、取引先情報、現在の発注在庫、発注合計金額
  
- 発注数の調整はボタンまたは入力で対応。

 
   
b. 商品マスタ確認・登録（責任者）
- 責任者権限を持つユーザーのみがアクセス可能。

- 商品マスタを一覧表示。1件選択で詳細情報の確認・編集が可能。

- 新規商品追加モードでは、空欄の入力欄により登録操作を行う。

- 分類チェックボックスにより、表示対象の商品を分類単位で絞り込み可能（複数選択可）。

<!-- - 商品情報の主な項目：

  - 商品ID（自動発番 or 編集不可）

  - 商品名、仕入価格、売価、在庫アラート数

  - ECサイト公開用の販売チェックボックス

- 保存時に確認ダイアログを表示。

- 入力値の検証（未入力、形式誤り、重複など）を行い、エラー時は登録不可とする。
- 責任者権限を持つユーザーのみがあるセス可能。
- 商品マスタを一覧表示。1件選択で詳細情報の確認・編集が可能。
- 新規商品追加ボタンで、登録操作を行う。
- 分類チェックボックスにより、表示対象の絞り込みが、可能。 -->



1. 顧客・売り上げ分析画面
-    本システムは大きく2つの機能があり。
    1. 売上データを可視化し、販売動向の把握や売上向上のための意思決定を支援。
    2. 顧客の詳細情報と購買傾向を分析し、ニーズ把握やマーケティング戦略の策定を支援。
    - セトリーブ内の切り替えボタンでいつでも業務メイン画面と顧客・売り上げ分析画面と切り替え可能。


7. 売り上げ分析画面
<img src="images\スクリーンショット 2025-07-31 143136.png" width="50%">
- 本画面では、カレンダー連動型の売上可視化機能を搭載。日付を選択すると、当日の売上・顧客数・商品別販売数が確認できます。
<!-- - 表示グラフと内容：
    | グラフ       | 縦       | 横     | 説明                                                                           |
    | ------------ | -------- | ------ | ------------------------------------------------------------------------------ |
    | 折れ線グラフ | 客数     | 時間   | 時間別の来店客数を表示。ピーク時間帯の分析やスタッフ配置の最適化に活用可能。   |
    | 棒グラフ     | 売り上げ | 商品名 | 商品ごとの売上高・販売数を可視化。売上順・販売数順に並び替えが可能。           |
    | 円グラフ     | なし     | なし   | 商品カテゴリ別の売上構成比・販売数比率を表示。売れ筋カテゴリを一目で把握可能。 | --> |
    
1. 顧客分析
<img src="images\スクリーンショット 2025-07-31 143142.png" width="50%">
- 本画面では、顧客ごとの属性や購買傾向の分析が可能。

- 顧客ID・名前から検索可能。表示される情報には以下が含まれます：

  - 氏名・住所・電話番号などの基本情報

  - 過去の購買履歴（日時・商品・数量など）

  - 累計購入金額・購入頻度・商品カテゴリごとの傾向
<!-- - 表示グラフと内容：
  
    | グラフ       | 縦       | 横     | 説明                                                                                                         |
    | ------------ | -------- | ------ | ------------------------------------------------------------------------------------------------------------ |
    | 折れ線グラフ | 客数     | 時間   | 月ごとの購入金額の変化や来店頻度の推移を、折れ線グラフで可視化。長期的な顧客行動の変化を一目で把握できます。 |
    | 棒グラフ     | 売り上げ | 商品名 | 顧客がどのカテゴリの商品をよく購入しているかを棒グラフで表示。ニーズや関心の高い分野を直感的に把握できます。 |
    | 円グラフ     | なし     | なし   | 総購入金額に占める商品カテゴリ別の割合を円グラフで表示。顧客の購買傾向をバランスよく視覚的に分析可能です。   | --> |

- 棒グラフには販売数、売り上げで並び替えができる

# 非機能要件

🔷【共通 非機能要件】
- **パフォーマンス**	
    - 画面表示、検索、操作、切替などは原則2秒以内で完了することを目標とする。
- **操作性**	
    - 操作時に**視覚的な反応（色・枠・動きなど）**を返す。
    - ショートカット・切替UIは直感的に使える設計とする。
- **ユーザビリティ**	
    - 各タブはどの画面が選ばれているか分かるように設計する。 
    - 画面構成や操作手順は直感的・迷わず使える構成とし、説明・ラベルなどを適切に配置。
- **信頼性**	
    - 入力ミス・不正データ・途中キャンセル時もクラッシュせず安定動作し、必要な復元処理・例外処理を行う。
- **セキュリティ**	
    - 権限による機能制限と全操作ログの記録を行う。
    - 重要操作は権限チェックでブロック。
- **拡張性・保守性**	
    - モジュール構成により将来的な画面追加・分析軸拡張に対応可能。エラーログで管理者が原因特定できる。

  
🔶【個別 非機能要件】

- 1 **ログイン画面**
    - パスワード入力欄はマスク表示（例：●）とし、他人から見えないようにする。
    - ログインに失敗した場合、ユーザーIDとパスワードのどちらが間違っているかを判別させないエラーメッセージ（例：「ログインに失敗しました」）を表示する。
    - 入力されたID・パスワードはデータベース内の情報と照合して認証を行う。
- 2 **セトリーブ**
	- セトリーブ内の切り替えボタンは直感的に使える配置と明確なラベル表示とする。
- 3 **業務メイン画面**
    - CSVの取り込み
    - ショートカット一覧は画面またはヘルプから確認可能にする。//実装する
    - カンバンUIは直感的な配置と見やすい情報設計とする。
    - 商品登録・削除は責任者のみ操作可能にし、権限を厳格にチェック。
- 4 **受注一覧画面**
    - ドラッグ・キーボード操作に即座に視覚的反応を返す
    - 確定時に変更内容を表示し、ダブルチェック可能にする
- 5 **商品詳細画面**
    - a **商品の確認・発注画面**
        - この画面は一般ユーザー・責任者の両方が利用可能。ログイン済みであればアクセス制限はかけない。
        - スライダー操作や数量変更時に即座に数値・金額へ反映され、視覚フィードバックあり。
        - 差引在庫は色分け（赤／黄）で在庫状況が一目で分かる。<br>販売中フィルター・在庫表示は直感的に切替可能。
        - 発注確定前に確認ダイアログを必ず表示し、二重確認を徹底。入力エラー時も処理継続可能。
        
    - b **商品マスタ確認・登録画面**
        - 	責任者のみがアクセス・操作可能。変更・追加は全て操作ログに記録。
        - 分類チェックボックスや入力項目にはラベル・説明を明示し、誤操作や迷いを減らす。
        - 確認ダイアログで保存前に内容確認ができる。
        <!-- - 商品の登録・変更操作は全てログに記録。 -->
- 6 **売上・顧客分析画面**
    -  分析画面は共通のデザイン・レイアウト・操作体系を持たせ、どちらの画面でも同様の使い方ができるようにする。
- 7 **売上分析画面**
    - カレンダーとグラフは連動し、**日付を変更するだけで内容が即時更新**される操作性とする。   
    - データが未取得または存在しない日付を選んだ場合でも**エラーにならず、「データなし」等で正常に表示される**ようにする。          
- 8 **顧客分析画面**
    - 顧客名・ふりがな検索、オート補完対応。
    - 存在しないIDや誤入力でも「該当なし」と表示し、エラー回避。
    - 顧客ID＋名前の両方で正確に検索できるようにする。









